```python
Кулешов Иван
e-mail: satura@ngs.ru
telegram: @viranum
```

# Аннотация

**Задание от Appscience**: собрать ссылки на товары с сайта www.agilent.com

## Возможности программы
Программа осуществляет парсинг:
- sitemap домена, определяя дочерние sitemap's с категориями товаров;
- Пробегает по всем категориям, в каждой категории парсит все страницы с продуктами;
- для каждого продукта по его идентификатору - **Part Number**, собирает всю информацию о спецификации товара, в том числе **Стоимость, Наименование валюты, Описание, Доступность** и любые другие характеристики, указанные для товара.
Также сохраняется информация о **Категории** товара и все ссылки;
- позволяет собирать информацию для разного сочетания Страны и Языка.

## Инструменты
Парсинг осуществляется с помощью библиотеки BeautifulSoup, навигация по страницам — браузером Silenium, в несколько потоков.

## Архитектура
- sitemap.py - класс GetProductLinks - сбор всех ссылок на продукты
- set_country.py - класс AgilentBrowser - реализует навигацию по сайту, выбор страны-языка, поиск элемента и клик по нему и т.д.
- parcing.py - реализована логика разбора страницы с характеристиками и их сбор
- main.py - основной модуль
- upload.py - после парсинга загрузка полученных результатов в *.csv в AWS S3 с приложенными к тестовому заданию параметрами.

## Использование
В файле main.py указать параметры:
```python
# Путь к драйверу Firefox для Selenium
PATH_DRIVER = 'geckodriver.exe'

# Константы для страны и языка, под которыми запускается парсинг
COUNTRY = 'United States'
LANGUAGE = 'English'

# Количество потоков (браузеров)
pool = ThreadPool(processes=5)

# Распределить очередь по потокам
pool.map(get_parcing_data_by_pool, [
                                    [links.map]
                                    ])
```

## Результаты
Количество собранных ссылок на категории товаров превышает 9100. В качестве тестовой работы приложен файл **"Appscience_parcing_Kuleshov.csv"**, содержащий результат парсинга первых 1000 категорий, поскольку процесс требует значительных временных затрат.

Полученные результаты загружены в AWS S3 с названием **"Appscience_parcing_Kuleshov.csv"**.
